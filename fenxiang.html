
<!-- zr空白模版 -->
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>2</title>
    <style>
        /* 基础样式 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
            background-color: #ffffff;
            color: #333;
            line-height: 1.6;
            padding: 0;
            -webkit-font-smoothing: antialiased;
        }
        
        /* 容器 */
        .container {
            max-width: 100%;
            padding: 15px;
        }
        
        /* 标题样式 */
        .header {
            padding: 20px 0;
            border-bottom: 1px solid #f0f0f0;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .title {
            font-size: 1.4rem;
            font-weight: 600;
            color: #222;
            margin-bottom: 8px;
            line-height: 1.4;
        }
        
        .meta {
            font-size: 0.9rem;
            color: #666;
        }
        
        /* 图片布局 */
        .image-grid {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 80px;
        }
        
        .image-item {
            width: 100%;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            background-color: #f9f9f9;
        }
        
        .image-item img {
            width: 100%;
            height: auto;
            display: block;
            transition: transform 0.3s ease;
        }
        
        .image-item img:hover {
            transform: scale(1.02);
        }
        
        /* 固定按钮 */
        .fixed-button {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: calc(100% - 100px);
            max-width: 500px;
            z-index: 100;
        }
        
        .fixed-button a {
            display: block;
            background: #5ca8e6;  
            color: white;
            text-align: center;
            padding: 8px 12px;
            border-radius: 999px; 
            text-decoration: none;
            font-weight: 600;
            font-size: 0.9rem;
            box-shadow: 0 6px 16px rgba(92, 168, 230, 0.4);
            transition: all 0.3s ease;
        }
        
        .fixed-button a:hover {
            background: #4b96d8;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(75, 150, 216, 0.5);
        }
        
        /* 响应式调整 */
        @media (min-width: 768px) {
            .container {
                max-width: 600px;
                margin: 0 auto;
            }
            
            .title {
                font-size: 1.6rem;
            }
        }
        .explanation {
            background: linear-gradient(to bottom right, #f8f9fa, #e9ecef);
            border-radius: 16px;
            padding: 20px;
            font-size: 15px;
            color: #4a5568;
            line-height: 1.7;
            border: 1px solid #e9ecef;
            text-align: center;
            margin: 15px 0;
        }
        
        .explanation h2 {
            font-size: 20px;
            margin-bottom: 15px;
            color: #ff416c;
            text-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }
        
        .app-download {
            display: inline-block;
            margin-top: 15px;
            padding: 12px 25px;
            background: linear-gradient(to right, #ff416c, #ff4b2b);
            color: white;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 600;
            box-shadow: 0 4px 15px rgba(255, 75, 43, 0.4);
            transition: all 0.3s;
        }
        
        .app-download:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(255, 75, 43, 0.5);
        }
        
        .app-download:active {
            transform: translateY(0);
        }
        
        .app-name {
            font-weight: 700;
            color: #ff416c;
            text-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }
        /* 分享解锁遮罩 */
        body.gated {
            overflow: hidden;
        }
        .container.blurred {
            filter: blur(6px);
            pointer-events: none;
            user-select: none;
        }
        .gate-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.75);
            z-index: 9999;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        .gate-overlay.show { display: flex; }
        .gate-card {
            width: 100%;
            max-width: 520px;
            background: #ffffff;
            border-radius: 16px;
            padding: 18px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.25);
        }
        .gate-title { font-size: 18px; font-weight: 700; margin-bottom: 6px; }
        .gate-sub { font-size: 14px; color: #666; margin-bottom: 10px; }
        .gate-qr { width: 82%; margin: 10px auto; border-radius: 12px; overflow: hidden; background: #f6f6f6; box-shadow: 0 6px 16px rgba(0,0,0,0.08); }
        .gate-qr img { width: 100%; display: block; }
        .gate-progress { margin: 10px 0 6px; font-size: 14px; color: #444; }
        .gate-bar { height: 8px; background: #eee; border-radius: 999px; overflow: hidden; }
        .gate-bar-inner { height: 100%; width: 0%; background: linear-gradient(90deg,#4b96d8,#5ca8e6); transition: width .3s ease; }
        .gate-buttons { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 12px; }
        .gate-buttons .btn { display: inline-block; text-align: center; padding: 10px 12px; border-radius: 999px; font-weight: 600; font-size: 14px; text-decoration: none; border: 0; cursor: pointer; }
        .btn-primary { background: #5ca8e6; color: #fff; box-shadow: 0 6px 16px rgba(92,168,230,0.4); }
        .btn-secondary { background: #f1f5f9; color: #111; }
        .gate-tip { margin-top: 8px; font-size: 12px; color: #666; }
    </style>
</head>
<body>
    <div class="container">
        <!-- 头部信息 -->
        <div class="header">
            <h1 class="title">标题标题</h1>
            <div class="meta"></div>
        </div>
        
        <!-- 图片展示区域 -->
        <div class="image-grid">
<div class="image-item"><img src="https://wdcdn.qpic.cn/MTMxMDI2NjE0MzQ5ODU1MTE_106327_2WeFNf-m93XHxUZ5_1756545326" alt="1"></div>
            <div class="explanation">
                <h2>本期无水印原图</h2>
                <p>保存到自己网盘，查看完整版</br><span class="app-name"></span></p>
                <a href="https://pan.xunlei.com/s/VOYuCXe8dPHtRGyjOtyP_VWbA1?pwd=zwzq" target="blank" class="app-download">点击下载</a>
            </div>
            <p style="text-align: center; font-size: 24px;">上一期↓↓↓</p>
            <iframe src="https://setutime-github-io.pages.dev/zr-button-container.html" style="border: none; height: 80px; width: 100%;"></iframe>
            <a href="https://setutime-github-io.pages.dev/zrsetu/21"><div class="image-item"><img src="https://wdcdn.qpic.cn/MTMxMDI2NjE0MzQ5ODU1MTE_356272_h4LvS2swfOfWkEyt_1756545076" alt="上一期链接"></div></a>
        </div>
        
        <!-- 悬浮按钮 -->
        <div class="fixed-button">
            <a href="https://qm.qq.com/q/3mnmFYTUbe" target="_blank">qq：45503380 添加好友获取更新</a>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const lazyImages = document.querySelectorAll('.image-item img');
            const GATE_REQUIRED = 3;
            const STORAGE_KEY_UNLOCK = 'qq_gate_unlocked_v1';
            const STORAGE_KEY_COUNT = 'qq_gate_share_count_v1';
            const QR_IMG = 'https://wdcdn.qpic.cn/MTMxMDI2NjE0MzQ5ODU1MTE_356272_h4LvS2swfOfWkEyt_1756545076';
            const shareTitle = document.title || '分享解锁';
            const shareDesc = '转发给3位QQ好友后解锁查看内容';
            const shareUrl = location.href.split('#')[0];

            function getShareCount() { return parseInt(localStorage.getItem(STORAGE_KEY_COUNT) || '0', 10); }
            function setShareCount(n) { localStorage.setItem(STORAGE_KEY_COUNT, String(n)); }
            function isUnlocked() { return localStorage.getItem(STORAGE_KEY_UNLOCK) === '1'; }
            function setUnlocked() { localStorage.setItem(STORAGE_KEY_UNLOCK, '1'); }

            function updateGateUI() {
                const progressText = document.getElementById('gateProgressText');
                const barInner = document.getElementById('gateBarInner');
                const count = Math.min(getShareCount(), GATE_REQUIRED);
                if (progressText) progressText.textContent = `已分享 ${count}/${GATE_REQUIRED}`;
                if (barInner) barInner.style.width = `${(count / GATE_REQUIRED) * 100}%`;
            }

            function showGate() {
                document.body.classList.add('gated');
                const container = document.querySelector('.container');
                if (container) container.classList.add('blurred');
                let overlay = document.getElementById('gateOverlay');
                if (overlay) overlay.classList.add('show');
                updateGateUI();
            }

            function hideGate() {
                document.body.classList.remove('gated');
                const container = document.querySelector('.container');
                if (container) container.classList.remove('blurred');
                let overlay = document.getElementById('gateOverlay');
                if (overlay) overlay.classList.remove('show');
            }

            function incrementShareCountAndMaybeUnlock() {
                let c = getShareCount() + 1;
                setShareCount(c);
                updateGateUI();
                if (c >= GATE_REQUIRED) {
                    setUnlocked();
                    hideGate();
                }
            }

            function showStatus(message, isError = false) {
                const statusEl = document.getElementById('gateStatus');
                if (statusEl) {
                    statusEl.textContent = message;
                    statusEl.style.display = 'block';
                    statusEl.style.background = isError ? '#fff0f0' : '#f0f8ff';
                    statusEl.style.color = isError ? '#cc0000' : '#0066cc';
                    // 3秒后自动隐藏
                    setTimeout(() => {
                        statusEl.style.display = 'none';
                    }, 3000);
                }
            }

            function shareViaQQ() {
                // 检测是否在QQ内置浏览器中
                const isInQQ = /QQ\//i.test(navigator.userAgent) || (window.mqq && mqq.ui);
                
                if (isInQQ && window.mqq && mqq.ui && mqq.ui.shareMessage) {
                    // 在QQ中，直接调起分享API，分享二维码图片
                    showStatus('正在调起QQ分享...');
                    try {
                        mqq.ui.shareMessage({
                            title: '分享二维码图片',
                            desc: '转发给好友解锁查看',
                            share_type: 0,
                            share_url: shareUrl,
                            image_url: QR_IMG
                        }, function(result) {
                            // 分享API调用成功，给用户计数（因为用户已经看到分享界面）
                            showStatus('分享界面已打开，请选择好友发送');
                            incrementShareCountAndMaybeUnlock();
                        });
                    } catch (e) {
                        // API调用异常，提示用户
                        showStatus('无法调起分享，请重试', true);
                    }
                } else {
                    // 不在QQ中，提示用户
                    showStatus('请在QQ中打开此页面', true);
                }
            }

            function buildGateOverlay() {
                if (document.getElementById('gateOverlay')) return;
                const overlay = document.createElement('div');
                overlay.className = 'gate-overlay show';
                overlay.id = 'gateOverlay';
                overlay.innerHTML = `
                    <div class="gate-card">
                        <div class="gate-title">分享后解锁</div>
                        <div class="gate-sub">将下方二维码图片转发给3位QQ好友即可解锁</div>
                        <div class="gate-qr"><img src="${QR_IMG}" alt="二维码"></div>
                        <div class="gate-progress"><span id="gateProgressText"></span></div>
                        <div class="gate-bar"><div id="gateBarInner" class="gate-bar-inner"></div></div>
                        <div id="gateStatus" class="gate-status" style="display: none; margin: 8px 0; padding: 8px; background: #f0f8ff; border-radius: 8px; font-size: 13px; color: #0066cc;"></div>
                        <div class="gate-buttons">
                            <button id="btnShareQQ" class="btn btn-primary">分享给好友</button>
                            <button id="btnIShared" class="btn btn-secondary">我已分享</button>
                        </div>
                        <div class="gate-tip">💡 点击"尝试QQ分享"将直接调起QQ分享界面，选择好友发送即可</div>
                    </div>
                `;
                document.body.appendChild(overlay);
                document.getElementById('btnShareQQ')?.addEventListener('click', shareViaQQ);
                document.getElementById('btnIShared')?.addEventListener('click', function() {
                    incrementShareCountAndMaybeUnlock();
                });
            }

            if (!isUnlocked()) {
                buildGateOverlay();
                showGate();
            }
            
            const lazyLoad = function() {
                lazyImages.forEach(img => {
                    if (img.getAttribute('data-src') && img.getBoundingClientRect().top < window.innerHeight + 100) {
                        img.src = img.getAttribute('data-src');
                        img.removeAttribute('data-src');
                    }
                });
            };
            
            lazyLoad();
            window.addEventListener('scroll', lazyLoad);
            window.addEventListener('resize', lazyLoad);
        });
    </script>
</body>
</html>
